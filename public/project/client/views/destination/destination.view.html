<div>
    <div class="row">
        <div class="col-md-10 col-md-offset-1">
            <h1>{{model.destinationDetails.parse.title}}
                <button ng-show="model.bookmarked" class="btn btn-success pull-right">
                    <span ng-click="model.removeBookmarkForPage(model.bookmark._id)">
                        Bookmarked
                    </span>
                </button>

                <button ng-show="!model.bookmarked" class="btn btn-default pull-right">
                    <span ng-click="model.bookmarkPage(model.destinationDetails.parse.title, model.destinationDetails.parse.pageid, user._id)">
                        Bookmark
                    </span>
                </button>
            </h1>
            <p ng-bind-html="model.destinationDetails.parse.text['*'] | unsafe"></p>
            <a href="https://en.wikivoyage.org/wiki/{{model.pageWikiURL}}" target="_blank">Know more at WikiVoyage</a>
        </div>
    </div>
    <br>
    <div class="row">
        <div class="col-md-5 border-solid">
            <h3>Members Visiting Destination</h3>
            <table ng-show="model.peopleVisiting" class="table borderless">
                <tr ng-repeat="visit in model.peopleVisiting" align="center">
                    <td><a href="#/timeline/{{visit.userId._id}}">{{visit.userId.username}}</a></td>
                    <td>{{visit.dateVisiting | date : format : timezone}}</td>
                </tr>
            </table>

            <p ng-show="!user">Please <a href="#/login">login</a> to see members visiting {{model.destinationDetails.parse.title}}</p>
        </div>
        <div class="col-md-5 col-md-offset-1 border-solid">
            <h3>Visiting this Destination?</h3>
            <form class="form-horizontal">
                <div class="form-group">
                    <label for="inputDate" class="col-sm-3 control-label">When?:</label>
                    <div class="col-sm-9">
                        <input ng-model="visitDate" type="date" class="form-control" id="inputDate">
                    </div>
                </div>
                <div class="form-group">
                    <div class="col-sm-offset-9 col-sm-3">
                        <button ng-click="model.createVisit(model.destinationDetails.parse.title, model.destinationDetails.parse.pageid, visitDate)" type="submit" class="btn btn-default btn-block">Submit</button>
                    </div>
                </div>
            </form>
        </div>
    </div>

    <h2>Reviews</h2>
    <div ng-repeat="review in model.reviews">
        <div class="row">
            <div class="col-md-1">
                <img src="{{review.userId.profilePicture}}" align="center" width="80" height="80">
            </div>
            <div class="col-md-11">
                <a href="#/timeline/{{review.userId._id}}"><h3>{{review.userId.username}}</h3></a>
                <p>
                    {{review.content}}
                </p>
            </div>
        </div>
    </div>
    <br>
    <div class="row">
        <form class="form-horizontal">
            <div class="form-group">
                <div class="col-md-12">
                    <textarea ng-model="content" class="form-control" rows="3" placeholder="Add your review..."></textarea>
                </div>
            </div>
            <div class="form-group">
                <div class="col-sm-offset-9 col-sm-3">
                    <button ng-click="model.createReviewForPage(model.destinationDetails.parse.title, model.destinationDetails.parse.pageid, content)" type="submit" class="btn btn-default btn-block">Submit</button>
                </div>
            </div>
        </form>
    </div>
</div>